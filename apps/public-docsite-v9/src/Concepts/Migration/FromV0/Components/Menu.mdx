import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Concepts/Migration/from v0/Components/Menu Migration" />

# Menu component Migration guide

## Overview:

`Menu` component is a replacement for `MenuButton`.

Before:

```tsx
import { MenuButton, Button } from '@fluentui/react-northstar';
const Component = () => <MenuButton trigger={<Button content="Open" title="Open" />} menu={['1', '2', '3']} />;
```

After:

```tsx
import { Menu, MenuTrigger, MenuPopover, MenuList, MenuItem, Button } from '@fluentui/react-components';

export const Component = () => {
  <Menu>
    <MenuTrigger>
      <Button>Open</Button>
    </MenuTrigger>
    <MenuPopover>
      <MenuList>
        <MenuItem>1</MenuItem>
        <MenuItem>2</MenuItem>
        <MenuItem>3</MenuItem>
      </MenuList>
    </MenuPopover>
  </Menu>;
};
```

## How to migrate props:

<table>
  <thead>
    <tr>
      <th>`MenuButton` props</th>
      <th>migrate guide</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>as, className</td>
      <td>keep it as is</td>
    </tr>
    <tr>
      <td>variables, styles, design</td>
      <td>see [Migrate style overrides](#migrate-style-overrides) in this document</td>
    </tr>
    <tr>
      <td>accessibility</td>
      <td>see [migrate-custom-accessibility.md](?path=/docs/concepts-migration-from-v0-custom-accessibility--docs)</td>
    </tr>
    <tr>
      <td>ref, key</td>
      <td>keep it as is</td>
    </tr>
    <tr>
      <td>contextMenu</td>
      <td>use `openOnContext` instead</td>
    </tr>
    <tr>
      <td>menu</td>
      <td>see [Migrate menu and trigger props](#./Migrate-`menu`-and-`trigger`-props) in this document</td>
    </tr>
    <tr>
      <td>mouseLeaveDelay</td>
      <td>replace with `hoverDelay`</td>
    </tr>
    <tr>
      <td>on</td>
      <td>replace `on='hover'` with `openOnHover`; `on='context'` with `openOnContext`</td>
    </tr>
    <tr>
      <td>onMenuItemClick</td>
      <td>use `onClick` with each `MenuItem` instead</td>
    </tr>
    <tr>
      <td>defaultOpen</td>
      <td>keep it as is</td>
    </tr>
    <tr>
      <td>onOpenChange</td>
      <td>keep it as is</td>
    </tr>
    <tr>
      <td>open</td>
      <td>keep it as is</td>
    </tr>
    <tr>
      <td>trigger</td>
      <td>see [Migrate menu and trigger props](#./Migrate-`menu`-and-`trigger`-props) in this document</td>
    </tr>
  </tbody>
</table>

Postioning props: `align`, `autoSize`, `flipBoundary`, `offset`,`overflowBoundary`,`popperRef`,`position`,`positionFixed`,`target`, `unstable_disableTether`, `unstable_pinned` are now attributes of the `positioning` prop.
v9 positioning shorthand is recommended when only `positon` or/and `align` is used: `<MenuButton position="below" align="end" />` can be migrate to a string like `<Menu positioning="below-end" />`.
See [Migrate positioning props](../migrate-positioning.md) for more.

---

## Migrate style overrides

⚠️ **If this is your first migration**, please read [the general guide on how to migrate styles](?path=/docs/concepts-migration-from-v0-custom-style-overrides--docs).

### Example for migrate boolean `variables`:

Before:

```tsx
// in COMPONENT_NAME.tsx
import { MenuButton, Button } from '@fluentui/react-northstar';

export const Component = () => (
  <MenuButton
    trigger={<Button content="Open" />}
    menu={['1']}
    variables={{ isBreakoutRoomsAssignmentMenuButton: true }}
  />
);

// in menu-button-styles.ts
export const menuButtonStyles = {
  root: ({ variables: { isBreakoutRoomsAssignmentMenuButton } }) => ({
    ...(isBreakoutRoomsAssignmentMenuButton && {
      width: '100%',
    }),
  }),
};
```

After:

```tsx
// in COMPONENT_NAME.tsx
import { useStyles } from './COMPONENT_NAME.styles.ts';
import { Menu, MenuTrigger, MenuPopover, MenuList, MenuItem, Button } from '@fluentui/react-components';

export const Component = () => {
  const classes = useStyles();
  return (
    <Menu className={classes.breakoutRoomsAssignmentMenuButton}>
      <MenuTrigger>
        <Button>Open</Button>
      </MenuTrigger>
      <MenuPopover>
        <MenuList>
          <MenuItem>1</MenuItem>
        </MenuList>
      </MenuPopover>
    </Menu>
  );
};

// in COMPONENT_NAME.styles.ts
import { makeStyles } from '@fluentui/react-components';

export const useStyles = makeStyles({
  breakoutRoomsAssignmentMenuButton: {
    width: '100%',
  },
});
```

## Migrate `menu` and `trigger` props

`menu` and `trigger` props were moved to JSX children using `MenuTrigger` and `MenuItem` components:

Before:

```tsx
import { MenuButton, Button } from '@fluentui/react-northstar';
const Component = () => <MenuButton trigger={<Button content="Open" />} menu={['1. menu item', '2. menu item']} />;
```

After:

```tsx
import { Menu, MenuTrigger, MenuPopover, MenuList, MenuItem, Button } from '@fluentui/react-components';

export const Component = () => {
  <Menu>
    <MenuTrigger>
      <Button>Open</Button>
    </MenuTrigger>
    <MenuPopover>
      <MenuList>
        <MenuItem>1. menu item</MenuItem>
        <MenuItem>2. menu item</MenuItem>
      </MenuList>
    </MenuPopover>
  </Menu>;
};
```
