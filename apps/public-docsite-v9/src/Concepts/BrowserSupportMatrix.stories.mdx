import { Meta } from '@storybook/addon-docs';

<Meta title="Concepts/Developer/Browser Support Matrix" />

Defining a browser support matrix to account for all different consumer cases is a difficult undertaking.
Browser matrix support takes into account various factors such as ECMAScript (ES), browser, and CSS
feature compatibility across different browsers and across different versions of those browsers.
FluentUI strives to find a balance that enables consumers who support modern browsers to reap the
full benefits of the library while at the same time providing the necessary guidance to consumers who
support older browsers. Details of a full and partial browser support matrix as well as actions consumers
will need to take such as transpiling and polyfilling are outlined below.

## ECMAScript Target & Transpilation

FluentUI will be targetting ES2020 as its Typescript target. FluentUI will not be performing any down-level transpilation below ES2020
which means that consumers who need to support older browsers (such as those that only support up to ES6) are responsible for transpiling down the FluentUI
library to fit their needs. This ensures that consumers who support modern browsers are not penalized and can get the added benefit of a reduced bundle size that
the latest ES standards provide.

## Full Browser Support Matrix

FluentUI fully supports browsers that are at or above the indicated versions below:

**Desktop Browsers:**

| Edge | Firefox | Chrome | Safari | Opera | Internet Explorer |
| ---- | ------- | ------ | ------ | ----- | ----------------- |
| >=84 | >=75    | >=84   | >=14.1 | >=73  | Not Supported     |

**Mobile Browsers:**

| Safari on iOS | Chrome for Android | Samsung |
| ------------- | ------------------ | ------- |
| >=14.5        | >=84               | >=16    |

FluentUI will ensure that no browser, ECMAScript, or CSS features that are incompatible with the support matrix laid out above are introduced.
For consumers who require the use/support of older browsers, please see the partial support matrix and polyfill sections below for more information
on what will need to be done.

## Partial Browser Support Matrix:

FluentUI provides partial support for the browsers below which will have limitations that will require consumers to transpile down and/or use polyfills to cover the support gaps.

**Desktop Browsers:**

| Edge | Firefox | Chrome | Safari | Opera | Internet Explorer |
| ---- | ------- | ------ | ------ | ----- | ----------------- |
| >=79 | >=69    | >=79   | >=13.1 | >=64  | Not Supported     |

**Mobile Browsers:**

| Safari on iOS | Chrome for Android | Samsung |
| ------------- | ------------------ | ------- |
| >=13.4        | >=79               | >=14    |

List of features that are currently used in FluentUI that aren't supported out of the box by the partial support matrix above:

**Unsupported CSS Features:**

1.  Flex gap: Unsupported by Chrome, Edge, Firefox, Opera, Safari, Safari on IOS, Chrome on Android
2.  CSS min, max, clamp: Unsupported by Firefox and Opera
3.  CSS revert value: Unsupported by Firefox and Opera

**Unsupported ECMAScript Features:**
ES2020 features such as nullish coalescing and optional chaining are already being utilized by the library.
These ES2020 features are not guaranteed to work in all browsers within the partial support matrix so consumers
will need to perform down-level transpilation of the library.

## Polyfills

FluentUI will not be providing polyfills for features we expect our full browser support matrix to already support.
The only instance that a polyfill may be provided is when FluentUI's use of a feature causes an application to crash on
the partial support browser matrix. Other than that, consumers will need to implement their own polyfills or use a third party one for their
applications. Handling polyfills on the application level ensures that those on modern browsers don't suffer from unnecessary overhead of
polyfills being shipped with the FluentUI library by default; as well as prevents any unintended polyfill duplication from the library and app level.
This also gives consumers the flexibility to provide robust solutions such as shipping a bundle with the necessary polyfills to support older browsers and one with a lighter,
polyfill-free bundle to support modern browsers.

## Browser Support Expectations:

**Consumer Expectations:**

1. Consumers will need to perform down-level transpilation of the FluentUI library should they need to support browsers that fall below the full support matrix.
2. Consumers will need to work around browser, ECMAScript and CSS feature gaps caused by needing to support browsers that fall below the full support matrix.

**Developer Expectations:**

1. FluentUI developers and contributors are internally expected to develop against the partial browser support matrix.
   This means that no code which causes applications to crash on the partially supported browsers (with the exception of ES syntax which are transpilable by the consumer)
   should be present in the library. Should any application breaking errors be discovered in the future, FluentUI will be responsible for fixing it internally.
2. FluentUI developers and contributors reserve the right to use features that fall in between the partial and full browser support matrices (like flex gap) as
   long as they don't result in applications crashing.

## Browser Support Going Forward

With an eye towards being a modern library, FluentUI will follow a yearly audit process to evaluate and update the current browser support matrix to keep pace
with the ever evolving ecosystem of the web. This will allow the team to utilize modern tools and improve overall engineering efficiency while also providing
consumers with performance and bundlesize improvements. These yearly audits will give FluentUI a reasonable timeframe to evaluate, decide and give notice if browser support
changes are made.
