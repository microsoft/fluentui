import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Concepts/Developer/V2 â†’ V3 Migration Guide" />

# V2 â†’ V3 Migration Guide

We're happy to announce Fluent Web Components v3 is now available. This document provides a high-level overview of the differences and API changes between previous versions. Please reach out if you have any questions.

Here's a snapshot of what's new and improved in v3.

- Smaller bundle size (-26% compressed!)
- Reduced DOM size and overhead by nearly 50%
- Improved Storybook docs
- Updated to FASTElement v2.0
- Individual component exports
- Leveraging ElementInternals for better form support
- Removed hard dependency on @microsoft/fast-foundation
- Continued alignment with Fluent React v9
- Improved setTheme() to set/unset at the page or element level

## Component Comparison v2 â†’ v3

A high-level look at the differences between components in v2 and v3

- ğŸ†• 15 new components
- âš ï¸ 5 renamed components
- â›”ï¸ 4 deprecated components
- ğŸ›£ï¸ 13 components on our current roadmap

### Renamed Components

- `anchor` = use `link` or `anchor-button`
- `progress` = use `progress-bar`
- `select` = use `dropdown`
- `text-area` = `textarea`
- `text-field` = `text-input`

### Deprecated Components

- `anchored-region`
- `slider-label` = `use field, label`
- `tabs` = use `tablist`
- `tab-panel` = use `role="tabpanel"`

# API Changes

- Form controls now use `<fluent-field>` wrapper to handle label spacing and errors
- Dialog = requires Dialog Body child
- Tabs = no longer a uniform control, allows for flexibility
- Accordion Item = attribute changes
- RadioGroup = new API to leverage field

API changes, renames, and deprecations are itemized in the table below.

| Component         | V2  | V3  | Notes                                                                          |
| ----------------- | --- | --- | ------------------------------------------------------------------------------ |
| accordion         | âœ…  | âœ…  |                                                                                |
| accordion-item    | âœ…  | âœ…  | âš ï¸ API Change â†’ Attributes changed to better match web platform                |
| anchor            | âœ…  | âš ï¸  | â›”ï¸ Renamed â†’ See \`link\`, \`anchor-button\`                                  |
| anchor-button     |     | ğŸ†•  |                                                                                |
| anchored-region   | âœ…  | âš ï¸  | â›”ï¸ Deprecated                                                                 |
| avatar            |     | ğŸ†•  |                                                                                |
| badge             | âœ…  | âœ…  |                                                                                |
| breadcrumb        | âœ…  |     |                                                                                |
| breadcrumb-item   | âœ…  |     |                                                                                |
| button            | âœ…  | âœ…  |                                                                                |
| calendar          | âœ…  |     |                                                                                |
| card              | âœ…  |     | ğŸš§ In Progress                                                                 |
| checkbox          | âœ…  | âœ…  |                                                                                |
| color             | âœ…  |     |                                                                                |
| combobox          | âœ…  | âœ…  |                                                                                |
| compound-button   |     | ğŸ†•  |                                                                                |
| data-grid         | âœ…  |     | ğŸš§ In Progress                                                                 |
| dialog            | âœ…  | âœ…  | âš ï¸ API Change â†’ Split into two components to allow for more expressive modals. |
| dialog-body       |     | ğŸ†•  |                                                                                |
| divider           | âœ…  | âœ…  |                                                                                |
| drawer            |     | ğŸ†•  |                                                                                |
| drawer-body       |     | ğŸ†•  |                                                                                |
| dropdown          |     | âœ…  |                                                                                |
| field             |     | ğŸ†•  |                                                                                |
| flipper           | âœ…  |     |                                                                                |
| horizontal-scroll | âœ…  |     |                                                                                |
| image             |     | ğŸ†•  |                                                                                |
| listbox           | âœ…  | âœ…  |                                                                                |
| listbox-option    | âœ…  | âœ…  |                                                                                |
| label             |     | ğŸ†•  |                                                                                |
| link              |     | âœ…  | (Renamed)                                                                      |
| menu              | âœ…  | âœ…  |                                                                                |
| menu-button       |     | ğŸ†•  |                                                                                |
| menu-item         | âœ…  | âœ…  |                                                                                |
| menu-list         |     | ğŸ†•  |                                                                                |
| message-bar       |     | ğŸ†•  |                                                                                |
| number-field      | âœ…  |     |                                                                                |
| popover           |     | âœ…  |                                                                                |
| progress          | âœ…  | ğŸ”€  | â›”ï¸ Renamed â†’ See \`progress-bar\`                                             |
| progress-bar      |     | âœ…  | (Renamed)                                                                      |
| progress-ring     | âœ…  |     |                                                                                |
| radio             | âœ…  | âœ…  |                                                                                |
| radio-group       | âœ…  | âœ…  |                                                                                |
| search            | âœ…  |     |                                                                                |
| select            | âœ…  | âœ…  | ğŸš§ In Progress                                                                 |
| skeleton          | âœ…  |     |                                                                                |
| slider            | âœ…  | âœ…  |                                                                                |
| slider-label      | âœ…  | âš ï¸  | â›”ï¸ Deprecated â†’ See \`label\`, \`field\`                                      |
| spinner           |     | ğŸ†•  |                                                                                |
| switch            | âœ…  | âœ…  |                                                                                |
| tab               | âœ…  | âœ…  |                                                                                |
| tabs              | âœ…  | âš ï¸  | â›”ï¸ Deprecated â†’ See \`tablist\`                                               |
| tab-panel         | âœ…  | âš ï¸  | â›”ï¸ Deprecated                                                                 |
| tablist           |     | ğŸ†•  |                                                                                |
| text              |     | ğŸ†•  |                                                                                |
| text-area         | âœ…  | ğŸ”€  | â›”ï¸ Renamed â†’ See textarea                                                     |
| textarea          |     | âœ…  | (Renamed)                                                                      |
| text-field        | âœ…  | ğŸ”€  | â›”ï¸ Renamedâ†’ See text-input                                                    |
| text-input        |     | âœ…  | (Renamed)                                                                      |
| toolbar           | âœ…  |     |                                                                                |
| tooltip           | âœ…  | âœ…  | âš ï¸ API is different from React implementation                                  |
| tree-item         | âœ…  | âœ…  | ğŸš§ In Progress                                                                 |
| tree-view         | âœ…  | âœ…  | ğŸš§ In Progress                                                                 |

### Notable API Changes

Here's an overview of the more significant changes in the project. Other smaller changes (like attribute renaming) will be reflected in the improved Storybook docs.

### Anchor

Anchor is deprecated in favor of `<fluent-link>` (for text links) and `<fluent-anchor-button>` (for links that look like buttons).

### Dialog

The previous dialog didn't allow for expressive dialogs without the default padding and presentation (like full-width imagery). This introduction of the `<fluent-dialog-body>` element allows for more custom compositions.

#### BEFORE:

```html
<!-- V2 -->
<fluent-dialog>
  <h1 slot="title">Title goes here</h1>
  <img src="full-width.jpg" alt="" />
  Contents go here
</fluent-dialog>
```

#### AFTER:

```html
<!-- V3 -->
<fluent-dialog>
  <img src="full-width.jpg" alt="optional image" />
  <fluent-dialog-body>
    <h1 slot="title">Title goes here</h1>
    Contents go here
  </fluent-dialog-body>
</fluent-dialog>
```

### Field

We have a new form Field component to control label placement and validation errors for form controls.

```html
<fluent-field label-position="after">
  <fluent-checkbox slot="input"></fluent-checkbox>

  <label slot="label" for="checkbox">Label goes here</label>
</fluent-field>
```

This is also used by `<fluent-radio-group>` (see below).

Due to web platform labelling constraints of the ShadowDOM, the labelling API for `<fluent-text-input>` and `<fluent-textarea>` is slightly different. Note that `<fluent-text-input>` uses the default slot for label, while `<fluent-textarea>` uses the label slot due to its default slot is reserved for the content inside the text area.

```html
<fluent-text-input>
  <fluent-label>Label goes here</fluent-label>
</fluent-text-input>

<fluent-textarea>
  <fluent-label slot="label">Label goes here</fluent-label>
</fluent-textarea>
```

### RadioGroup

#### BEFORE:

```html
<fluent-radio-group id="radio-group">
  <fluent-radio value="apple">Apple</fluent-radio>
  <fluent-radio value="banana">Banana</fluent-radio>
</fluent-radio-group>
```

#### AFTER:

```html
<fluent-field>
  <label slot="label" for="radio-group">Favorite Fruit</label>
  <fluent-radio-group
    slot="input"
    id="radio-group"
    aria-labelledby="radio-group--label"
    orientation="vertical"
    name="favorite-fruit"
  >
    <fluent-field label-position="after">
      <label slot="label" for="radio-group--apple">Apple</label>
      <fluent-radio slot="input" id="radio-group--apple" name="favorite-fruit" value="apple"></fluent-radio>
    </fluent-field>

    <fluent-field label-position="after">
      <label slot="label" for="radio-group--banana">Banana</label>
      <fluent-radio slot="input" id="radio-group--banana" name="favorite-fruit" value="banana"></fluent-radio>
    </fluent-field>
  </fluent-radio-group>
</fluent-field>
```

### setTheme

A more powerful and simpler set-theme API that allows setting themes at the element level.

- `setThemeFor()` is deprecated in favor of `setTheme( theme, element )`
- `setTheme()` can unset themes with `setTheme(null)` or `setTheme( null, element )`

### Case studies

- [Edge is seeing impressive results](https://blogs.windows.com/msedgedev/2024/05/28/an-even-faster-microsoft-edge/) when switching WebView UI to Fluent Web Components v3.
