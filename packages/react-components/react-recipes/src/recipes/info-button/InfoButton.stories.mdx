import LinkTo from '@storybook/addon-links/react';
import { Meta } from '@storybook/addon-docs';
import { InfoButtonSnippetExample } from './code-snippets';
import { Example } from '../../templates';

<Meta title="Concepts/Recipes/Info Button" />

---

# Info Button recipe

### **Overview**

An InfoButton provides a way to display additional information about a form field or an area in the UI. InfoButtons
can be used along with the field variants of input components and labels.

### **Ingredients**

- <LinkTo kind="components-button-button--default">@fluentui/react-button</LinkTo>
- <LinkTo kind="components-popover--default">@fluentui/react-popover</LinkTo>
- <LinkTo kind="concepts-developer-icons-icons--page">@fluentui/react-icons</LinkTo>
- <LinkTo kind="preview-components-field--default">@fluentui/react-field</LinkTo>
- <LinkTo kind="components-label--default">@fluentui/react-label</LinkTo>

## **Steps**

<Example>
  <InfoButtonSnippetExample />
</Example>

To achieve an `InfoButton` like the one above, there are three main components/ingredients needed. The first one being
the `Button` component that serves as our trigger and visible button. The second being the `Info` icon along with the
`bundleIcon` utility that will be displayed inside the `Button`. Finally, the `Popover` component that will be used to
display the content of the `InfoButton`.

### **1. Create the `Button`.**

We first need to create an icon with the `bundleIcon` utility. You'll need to pass the filled and regular versions of
the icon to the utility. The name will change based on the size, we use `Info16Filled` and `Info16Regular` (notice the
`16` at the end of the name) for the 16 px size. For more information about the `bundleIcon` utility, check out the
link above pointing to `@fluenui/react-icons`.

After having the icon, we will create the `Button` component. We will use the `icon` slot to pass the icon we created
and set the `appearance` to `transparent`. This will make the button transparent and only show the icon.

### **2. Integrate the `Popover` with the `Button` we created.**

Now that we have a `Button` ready to be used, we can integrate it with the `Popover` component. We will use the Popover
and have two children, the `PopoverTrigger` which wraps our `Button` and the `PopoverContent` which will wrap what
we want to display when the `InfoButton` is opened. The result of these steps should already look similar to the
example, but the `Popover` will require some additional props to be set. These are:

- `withArrow`: this will add an arrow at the bottom of the `Popover` to indicate that it is attached to the `Button`.
- `positioning: 'above-start'`: this will position the `Popover` above the `Button` and align it to the left side.

### **3. Add selected styles to the `Button`.**

You'll notice that our current progress has a missing style, when the `InfoButton` is opened, the `Button`'s icon should
have the filled appearance. To achieve this, we will need to add an open state to our `InfoButton` using
`React.useState`. Once we've created the state, we will need to add the following props to `Popover`.

- `open`: we will pass the state to this prop.
- `onOpenChange`: this will be a callback that will be called when the `Popover` is opened or closed. We will use this
  callback to update the state we created.

Finally, we can create a `makeStyles` hook that will have the selected styles for `Button`'s icon. This className needs
to have the `iconFilledClassName` visible and the `iconRegularClassName` hidden, refer to the icon's documentation page
for more details. Finally, we will also add the `colorNeutralForeground2BrandHover` color to the icon, this color is
found in the tokens exported by `@fluentui/react-components`. Once we have this className, we need to apply it to the
icon whenever the `Popover` is open by using the `state` we created.

## **Variants**

### **Sizing**

- #### **Small**

| Attribute                    | Size                |
| ---------------------------- | ------------------- |
| Icon                         | `12`                |
| Content font                 | `caption1`          |
| Popover                      | `small`             |
| Popover's vertical padding   | `spacingVerticalXS` |
| Popover's horizontal padding | `spacingVerticalXS` |

- #### **Medium**

| Attribute                    | Size                |
| ---------------------------- | ------------------- |
| Icon                         | `16`                |
| Content font                 | `caption1`          |
| Popover                      | `small`             |
| Popover's vertical padding   | `spacingVerticalXS` |
| Popover's horizontal padding | `spacingVerticalXS` |

- #### **Large**

| Attribute                    | Size                 |
| ---------------------------- | -------------------- |
| Icon                         | `20`                 |
| Content font                 | `body1`              |
| Popover                      | `medium`             |
| Popover's vertical padding   | `spacingVerticalXXS` |
| Popover's horizontal padding | `spacingVerticalXXS` |

## **Best practices**

### **Accessibility**

- The `PopoverSurface` should have a role of `note`.
- The `aria-label` should be set to `"information"`.
- When using the `InfoButton` with a `Field` or `Label`, the `Button` should have `aria-labelledby` set to
  `aria-labelledby="<field-label-id / label-id> info-button-id"`. The first id being either the label's id or the
  field's label id and the second being the `Button`'s id.

### **Dont's**

- Because the Popover isn't always visible, don't include information that people must know in order to complete the field.
